<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CampusCare - Lost & Found</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <header>
    <div class="logo">CampusCare</div>
    <nav>
      <a href="{{ url_for('index') }}">Home</a>
      <a href="{{ url_for('lost_page') }}" class="btn protected-btn">Report Lost</a>
      <a href="{{ url_for('found_page') }}" class="btn protected-btn">Report Found</a>
      <a href="{{ url_for('listings_page') }}" class="btn">Listings</a>
    </nav>
    {% if current_user.is_authenticated %}
      <div class="auth-buttons">
        <span class="welcome-user">Hi, {{ current_user.first_name }}!</span>
        <a href="{{ url_for('logout') }}" class="btn">Logout</a>
      </div>
    {% else %}
      <div class="auth-buttons">
        <a href="#" id="login-btn" class="btn">Login</a>
        <a href="#" id="signup-btn" class="btn">Sign Up</a>
      </div>
    {% endif %}
  </header>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="flash-messages">
        {% for category, message in messages %}
          <div class="flash {{ category }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}
  <main>
    <section class="hero">
      <h2>Welcome to CampusCare </h2>
      <p>Lost something? Found something? Let's connect and return items to their rightful owners.</p>
      <a href="{{ url_for('listings_page') }}" class="btn">View All Items</a>
    </section>

    <section class="features">
      <div class="card">
        <h3>📌 Report Lost Item</h3>
        <p>Submit details about an item you lost on campus.</p>
        <a href="{{ url_for('lost_page') }}" class="protected-btn">Report Lost</a>
      </div>
      <div class="card">
        <h3>📦 Report Found Item</h3>
        <p>Help others by reporting something you’ve found.</p>
        <a href="{{ url_for('found_page') }}" class="protected-btn">Report Found</a>
      </div>
      <div class="card">
        <h3>📋 View Listings</h3>
        <p>Browse all reported lost and found items.</p>
        <a href="{{ url_for('listings_page') }}">View All</a>
      </div>
    </section>

    <section class="cta">
      <h2>Together we can make campus better 🩷</h2>
      <p>Be a responsible student — use CampusCare to help others.</p>
    </section>
  </main>

  <footer>
    <p>© 2025 CampusCare | Built with ❤️ for Students</p>
  </footer>

  <!-- Consolidated Auth Modal -->
  <div id="auth-modal" class="modal">
    <div class="modal-content auth-modal-content">
        <span class="close">&times;</span>
        
        <!-- Login Form -->
        <div class="form-wrapper" id="loginForm">
            <div class="form-header">
                <h1>Welcome Back</h1>
                <p>Sign in to your CampusCare account</p>
            </div>
            <form class="auth-form" method="POST" action="{{ url_for('login') }}">
                <div class="input-group">
                    <label for="loginEmail">Email Address</label>
                    <input type="email" id="loginEmail" name="email" required>
                </div>
                <div class="input-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" name="password" required>
                    <span class="password-toggle" onclick="togglePassword('loginPassword', this)">👁️</span>
                </div>
                <div class="form-options">
                    <label class="checkbox-container">
                        <input type="checkbox" name="remember">
                        <span class="checkmark"></span>
                        Remember me
                    </label>
                    <a href="#" class="forgot-password">Forgot Password?</a>
                </div>
                <button type="submit" class="btn-primary">Sign In</button>
            </form>
            <div class="form-footer">
                <p>Don't have an account? <a href="#" onclick="switchToSignup()">Sign up here</a></p>
            </div>
        </div>

        <!-- Signup Form -->
        <div class="form-wrapper" id="signupForm">
            <div class="form-header">
                <h1>Create Account</h1>
                <p>Join our CampusCare community</p>
            </div>
            <form class="auth-form" method="POST" action="{{ url_for('signup') }}">
                <div class="input-row">
                    <div class="input-group">
                        <label for="firstName">First Name</label>
                        <input type="text" id="firstName" name="firstName" required>
                    </div>
                    <div class="input-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" id="lastName" name="lastName" required>
                    </div>
                </div>
                <div class="input-group">
                    <label for="signupEmail">Email Address</label>
                    <input type="email" id="signupEmail" name="email" required>
                </div>
                <div class="input-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" name="password" required minlength="6">
                    <span class="password-toggle" onclick="togglePassword('signupPassword', this)">👁️</span>
                </div>
                <div class="form-options">
                    <label class="checkbox-container">
                        <input type="checkbox" name="terms" required>
                        <span class="checkmark"></span>
                        I agree to the <a href="#" class="terms-link">Terms & Conditions</a>
                    </label>
                </div>
                <button type="submit" class="btn-primary">Create Account</button>
            </form>
            <div class="form-footer">
                <p>Already have an account? <a href="#" onclick="switchToLogin()">Sign in here</a></p>
            </div>
        </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
</body>
</html>